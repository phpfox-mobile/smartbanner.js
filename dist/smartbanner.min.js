/*!
 * smartbanner.js v1.16.0 <https://github.com/ain/smartbanner.js>
 * Copyright Â© 2020 Ain Tohvri, contributors. Licensed under GPL-3.0.
 */
!function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return r(t[a][1][e]||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}}()({1:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getCookieExpiresString",value:function(e){var t=new Date,n=new Date(t.getTime()+e);return"expires=".concat(n.toGMTString(),";")}},{key:"bake",value:function(t,n){document.cookie="smartbanner_exited=1; ".concat(t?e.getCookieExpiresString(t):""," path=").concat(n)}},{key:"unbake",value:function(){document.cookie="smartbanner_exited=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"baked",get:function(){return"1"===document.cookie.replace(/(?:(?:^|.*;\s*)smartbanner_exited\s*=\s*([^;]*).*$)|^.*$/,"$1")}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();n.default=r},{}],2:[function(e,t,n){(function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}var i,r,o;return i=n,o=[{key:"platform",value:function(){return/iPhone|iPad|iPod/i.test(window.navigator.userAgent)?"ios":/Android/i.test(window.navigator.userAgent)?"android":void 0}},{key:"userAgentMatchesRegex",value:function(e){return new RegExp(e).test(window.navigator.userAgent)}},{key:"jQueryMobilePage",value:function(){return void 0!==e.$&&"undefined"!==e.$.mobile&&null!==document.querySelector(".ui-page")}},{key:"wrapperElement",value:function(){var e=n.jQueryMobilePage()?".ui-page":"html";return document.querySelectorAll(e)}},{key:"isSafariBrowser",value:function(){const e=window.navigator.userAgent;return!(!/iPhone|iPad|iPod/i.test(e)||!/Safari/i.test(e)||/CriOS|FxiOS/i.test(e))}}],(r=null)&&t(i.prototype,r),o&&t(i,o),n}();n.default=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";var i,r,o=(i=e("./smartbanner.js"))&&i.__esModule?i:{default:i};window.addEventListener("load",function(){if(!o.default)return null;(r=new o.default).apiEnabled?window.smartbanner=r:r.publish()})},{"./smartbanner.js":5}],4:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"parse",value:function(){const e=$.smartbannerConfig;var t={};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}}])&&i(t.prototype,n),r&&i(t,r),e}();n.default=r},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("./optionparser.js")),r=a(e("./detector.js")),o=a(e("./bakery.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u={originalTop:"data-smartbanner-original-top",originalMarginTop:"data-smartbanner-original-margin-top"};function l(e){this.positioningDisabled||c(e.data.height)}function c(e){var t=r.default.wrapperElement(),n=document.querySelector(".sticky-bar"),i=n&&"fixed"===getComputedStyle(n).position;i||(i=n&&"fixed"===getComputedStyle(n.parentElement).position,n=n.parentElement);for(var o,a=0,s=t.length;a<s;a++)if(o=t[a],r.default.jQueryMobilePage()){if(o.getAttribute(u.originalTop))continue;var l=parseFloat(getComputedStyle(o).top);o.setAttribute(u.originalTop,isNaN(l)?0:l),o.style.top=e+"px",document.body.classList.add("has-smartbanner"),i&&(n.style.marginTop=e+"px")}else{if(o.getAttribute(u.originalMarginTop))continue;var c=parseFloat(getComputedStyle(o).marginTop);o.setAttribute(u.originalMarginTop,isNaN(c)?0:c),o.style.marginTop=e+"px",document.body.classList.add("has-smartbanner"),i&&(n.style.marginTop=e+"px")}}var d=function(){if(r.default.isSafariBrowser())return null;function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new i.default;this.options=t.parse(),this.platform=r.default.platform();var n=new Event("smartbanner.init");document.dispatchEvent(n)}var t,n,a;return t=e,(n=[{key:"publish",value:function(){if(0===Object.keys(this.options).length)throw new Error("No options detected. Please consult documentation.");if(o.default.baked)return!1;if(this.userAgentExcluded)return!1;if(!this.platformEnabled&&!this.userAgentIncluded)return!1;var e=document.createElement("div");document.querySelector("body").appendChild(e),e.outerHTML=this.html;var t,n=new Event("smartbanner.view");document.dispatchEvent(n),this.positioningDisabled||c(this.height),t=this,document.querySelector(".js_smartbanner__exit").addEventListener("click",function(e){return function(e,t){t.exit(),e.preventDefault()}(e,t)}),document.querySelector(".js_smartbanner__button").addEventListener("click",function(e){return function(e,t){t.clickout()}(0,t)}),r.default.jQueryMobilePage()&&$(document).on("pagebeforeshow",t,l),$("#smartbanner__button").click(function(){const e=$.smartbannerConfig,t=r.default.platform();if("android"===t){const t=`intent://${window.location.hostname}${window.location.pathname}/#Intent;scheme=https;package=${e.idPlayStore};end`;window.location.replace(t)}else if("ios"===t){const t=`https://apps.apple.com/us/app/id${e.idAppStore}`;window.location.replace(t)}})}},{key:"exit",value:function(){r.default.jQueryMobilePage()&&$(document).off("pagebeforeshow",l),this.positioningDisabled||function(){var e=r.default.wrapperElement(),t=document.querySelector(".sticky-bar"),n=t&&"fixed"===getComputedStyle(t).position;n||(n=t&&"fixed"===getComputedStyle(t.parentElement).position,t=t.parentElement);for(var i,o=0,a=e.length;o<a;o++)i=e[o],r.default.jQueryMobilePage()&&i.getAttribute(u.originalTop)?(i.style.top=i.getAttribute(u.originalTop)+"px",document.body.classList.remove("has-smartbanner"),n&&(t.style.marginTop="")):i.getAttribute(u.originalMarginTop)&&(i.style.marginTop=i.getAttribute(u.originalMarginTop)+"px",document.body.classList.remove("has-smartbanner"),n&&(t.style.marginTop=""))}();var e=document.querySelector(".js_smartbanner");document.querySelector("body").removeChild(e);var t=new Event("smartbanner.exit");document.dispatchEvent(t),o.default.bake(this.hideTtl,this.hidePath)}},{key:"clickout",value:function(){var e=new Event("smartbanner.clickout");document.dispatchEvent(e)}},{key:"originalTop",get:function(){var e=r.default.wrapperElement()[0];return parseFloat(e.getAttribute(u.originalTop))}},{key:"originalTopMargin",get:function(){var e=r.default.wrapperElement()[0];return parseFloat(e.getAttribute(u.originalMarginTop))}},{key:"priceSuffix",get:function(){return"ios"===this.platform?this.options.priceSuffixApple:"android"===this.platform?this.options.priceSuffixGoogle:""}},{key:"icon",get:function(){return"android"===this.platform?this.options.iconGoogle:this.options.iconApple}},{key:"buttonUrl",get:function(){return"android"===this.platform?this.options.buttonUrlGoogle:"ios"===this.platform?this.options.buttonUrlApple:"#"}},{key:"closeLabel",get:function(){return void 0!==this.options.closeLabel?this.options.closeLabel:"Close"}},{key:"html",get:function(){return`<div class="smartbanner js_smartbanner">\n      <a href="javascript:void();" class="smartbanner__exit js_smartbanner__exit" aria-label="${this.closeLabel}"></a>\n      <div class="smartbanner__icon" style="background-image: url(${this.options.icon});"></div>\n      <div class="smartbanner__info">\n        <div>\n          <div class="smartbanner__info__title">${this.options.title}</div>\n          <div class="smartbanner__info__author">${this.options.author}</div>\n          <div class="smartbanner__info__price">${this.options.price}</div>\n        </div>\n      </div>\n      <a id="smartbanner__button" class="smartbanner__button js_smartbanner__button" rel="noopener" aria-label="${this.options.button}">\n      <span class="smartbanner__button__label">View</span>\n      </a>\n    </div>`}},{key:"height",get:function(){try{return document.querySelector(".js_smartbanner").offsetHeight}catch(e){return 0}}},{key:"platformEnabled",get:function(){var e=this.options.enabledPlatforms||"android,ios";return e&&-1!==e.replace(/\s+/g,"").split(",").indexOf(this.platform)}},{key:"positioningDisabled",get:function(){return"true"===this.options.disablePositioning}},{key:"apiEnabled",get:function(){return"true"===this.options.api}},{key:"userAgentExcluded",get:function(){return!!this.options.excludeUserAgentRegex&&r.default.userAgentMatchesRegex(this.options.excludeUserAgentRegex)}},{key:"userAgentIncluded",get:function(){return!!this.options.includeUserAgentRegex&&r.default.userAgentMatchesRegex(this.options.includeUserAgentRegex)}},{key:"hideTtl",get:function(){return!!this.options.hideTtl&&parseInt(this.options.hideTtl)}},{key:"hidePath",get:function(){return this.options.hidePath?this.options.hidePath:"/"}}])&&s(t.prototype,n),a&&s(t,a),e}();n.default=d},{"./bakery.js":1,"./detector.js":2,"./optionparser.js":4}]},{},[3]);
